#N canvas 11 41 943 996 12;
#X declare -path .;
#X obj 3 13 controller;
#X obj 1418 531 vsl 19 162 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 1740 531 vsl 19 162 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#N canvas 11 41 1898 476 output 0;
#X obj 71 117 tgl 40 0 master-onoff master-onoff master\ on-off 0 -10 0 12 #9c00ff #000000 #000000 0 1;
#X obj 957 75 r master-onoff;
#X obj 453 101 level-control-2ch master;
#X obj 402 476 dac~;
#X obj 360 437 audio_safety~;
#X obj 509 435 audio_safety~;
#X obj 547 117 scope~;
#X obj 249 101 level-control-2ch input;
#X obj 314 56 adc~;
#X obj 352 101 level-control-2ch recirc;
#X obj 369 53 catch~ grains-l;
#X obj 496 55 catch~ grains-r;
#X obj 956 108 sel 0 1;
#X msg 979 152 \; pd dsp 1;
#X obj 804 394 samplerate~;
#X floatatom 804 421 7 0 0 0 - - - 0;
#X obj 804 368 bng 19 250 50 0 empty empty empty 17 7 0 10 #dfdfdf #000000 #000000;
#X obj 804 341 receive pd-dsp-started;
#X obj 804 452 v samplerate;
#X obj 1085 74 r master-lev;
#X obj 1052 155 float;
#X obj 1052 179 s master-lev;
#X msg 875 242 \; pd dsp 0;
#X obj 876 152 del 100;
#X obj 910 445 / 1000;
#X obj 911 474 v samples-per-ms;
#X msg 910 203 \; master-lev 0;
#X obj 50 574 input-recording loop-grain;
#X obj 1085 98 sel 0;
#X obj 71 237 nbx 6 24 -1e+37 1e+37 0 0 loop-grain-set-buffer-size loop-grain-set-buffer-size empty 0 -10 0 20 #fcfcfc #000000 #000000 0 256;
#X text 70 176 input recording buffer size (sec), f 10;
#X obj 709 117 record-file output;
#X obj 273 505 throw~ output-record-l;
#X obj 436 505 throw~ output-record-r;
#X obj 198 221 tgl 40 0 empty loop-grain-buffer-full empty 0 -10 0 12 #ffffff #ff0400 #000000 0 1;
#X text 196 190 buffer full, f 6;
#X obj 287 296 throw~ loop-grain-record~;
#X obj 61 488 r master-onoff;
#X obj 61 512 s loop-grain-rec-toggle;
#X obj 157 399 s~ mic-passthrough;
#X obj 728 36 r~ mic-passthrough;
#X obj 33 296 r mic-passthrough-toggle;
#X obj 190 350 *~;
#X obj 217 106 tgl 25 0 mic-passthrough-toggle empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X text 136 130 mic passthrough;
#X obj 622 14 r~ sampler;
#X connect 1 0 12 0;
#X connect 2 0 4 0;
#X connect 2 0 6 0;
#X connect 2 1 5 0;
#X connect 4 0 3 0;
#X connect 4 0 32 0;
#X connect 5 0 3 1;
#X connect 5 0 33 0;
#X connect 7 0 36 0;
#X connect 7 0 42 0;
#X connect 7 1 36 0;
#X connect 8 0 7 0;
#X connect 8 1 7 1;
#X connect 9 0 36 0;
#X connect 9 1 36 0;
#X connect 10 0 2 0;
#X connect 10 0 9 0;
#X connect 11 0 2 1;
#X connect 11 0 9 1;
#X connect 12 0 26 0;
#X connect 12 0 23 0;
#X connect 12 1 13 0;
#X connect 12 1 20 0;
#X connect 14 0 15 0;
#X connect 15 0 18 0;
#X connect 15 0 24 0;
#X connect 16 0 14 0;
#X connect 17 0 16 0;
#X connect 19 0 28 0;
#X connect 20 0 21 0;
#X connect 23 0 22 0;
#X connect 24 0 25 0;
#X connect 28 1 20 1;
#X connect 37 0 38 0;
#X connect 40 0 2 1;
#X connect 41 0 42 1;
#X connect 42 0 39 0;
#X connect 45 0 2 1;
#X coords 0 -1 1 1 780 162 2 70 100;
#X restore 315 342 pd output;
#X obj 5 547 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 5 573 s verify-midi-setup;
#X msg 1464 727 \; loop-grain-tablename symbol hedgehog;
#X obj 3 622 _granulator loop-grain loop-grain-buffer 64;
#X obj 1566 531 vsl 19 162 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 1466 763 \; loop-grain-tablename symbol loop-grain-buffer;
#X text 1465 801 this is now also auto-set by argument to the granulator but it can be changed on the fly too, f 47;
#X obj 1740 702 s loop1-dur-ctrl;
#X obj 1418 702 s loop-pan-skew-ctrl;
#X text 1317 511 everything can be controlled via messages (which can come from hardware controls), f 83;
#X text 27 550 makes MIDI setup verbose (in Pd window);
#X obj 1652 533 vsl 19 162 0 127 0 0 empty empty empty 0 -9 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 1652 702 s input-lev;
#X obj 1566 702 s loop1-lev;
#X msg 1197 804 \; loop-grain-dur-min 10 \; loop-grain-dur-max \$1 \; loop-grain-file-position-min \$2 \; loop-grain-file-position-max \$3;
#X obj 1197 776 r latest-loop-timing;
#X obj 332 523 declare -path .;
#X obj 4 342 setting-save settings 1;
#X text 1198 741 sets granulator boundaries to most recently recorded loop, f 32;
#X obj 386 13 granulooper loop1 loop-grain-buffer;
#X obj 797 13 granulooper loop2 loop-grain-buffer;
#X obj 1208 13 granulooper loop3 loop-grain-buffer;
#N canvas 966 41 943 996 mappings 1;
#X obj 102 76 r btn;
#X obj 102 101 route a b x y;
#X obj 16 137 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 16 162 sel 1 0;
#X obj 16 226 s loop1-loop-start;
#X obj 30 202 s loop1-loop-end;
#X obj 152 137 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 152 162 sel 1 0;
#X obj 289 137 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 289 162 sel 1 0;
#X obj 593 76 r stick_left_x;
#X obj 767 76 r stick_left_y;
#X obj 1102 75 r stick_right_y;
#X obj 931 75 r stick_right_x;
#X floatatom 593 101 5 0 0 0 - - - 0;
#X floatatom 767 101 5 0 0 0 - - - 0;
#X floatatom 931 100 5 0 0 0 - - - 0;
#X floatatom 1102 100 5 0 0 0 - - - 0;
#X obj 65 392 r trigger_left;
#X obj 270 393 r trigger_right;
#X floatatom 225 440 5 0 0 0 - - - 0;
#X obj 225 464 s sample-vol;
#X floatatom 65 417 5 0 0 0 - - - 0;
#X text 597 389 grain duration (dur-ctrl) \; transpose (transp-ctrl) (transp-skew-ctrl) \; offset-skew (offset-skew-ctrl) \; pan (pan-ctrl) \; reverb (aux-ctrl) \; sample volume;
#X obj 166 202 s loop2-loop-end;
#X obj 152 226 s loop2-loop-start;
#X obj 303 202 s loop3-loop-end;
#X obj 289 226 s loop3-loop-start;
#X obj 424 94 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 423 198 s loop1-loop-toggle;
#X obj 424 226 s loop2-loop-toggle;
#X obj 424 172 s loop3-loop-toggle;
#X obj 424 119 sel 1;
#X obj 424 144 0;
#X obj 569 159 s loop1-dur-ctrl;
#X obj 569 190 s loop2-dur-ctrl;
#X obj 569 221 s loop3-dur-ctrl;
#X obj 722 159 s loop1-offset-skew-ctrl;
#X obj 723 188 s loop2-offset-skew-ctrl;
#X obj 723 218 s loop3-offset-skew-ctrl;
#X obj 923 157 s loop1-transp-ctrl;
#X obj 923 183 s loop2-transp-ctrl;
#X obj 924 209 s loop3-transp-ctrl;
#X obj 1088 156 s loop1-transp-skew-ctrl;
#X obj 1089 181 s loop1-transp-skew-ctrl;
#X obj 1089 207 s loop1-transp-skew-ctrl;
#X obj 35 477 s loop1-aux-ctrl;
#X obj 35 502 s loop2-aux-ctrl;
#X obj 35 527 s loop2-aux-ctrl;
#X obj 593 125 - 64;
#X obj 767 125 - 64;
#X obj 931 124 - 64;
#X obj 1102 124 - 64;
#X obj 407 572 s sample-play;
#X obj 252 320 change;
#X obj 355 423 == 1;
#X obj 355 448 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 355 473 sel 1;
#X obj 355 498 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 6 0;
#X connect 1 2 8 0;
#X connect 1 3 28 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 1 5 0;
#X connect 6 0 7 0;
#X connect 7 0 25 0;
#X connect 7 1 24 0;
#X connect 8 0 9 0;
#X connect 9 0 27 0;
#X connect 9 1 26 0;
#X connect 10 0 14 0;
#X connect 11 0 15 0;
#X connect 12 0 17 0;
#X connect 13 0 16 0;
#X connect 14 0 49 0;
#X connect 15 0 50 0;
#X connect 16 0 51 0;
#X connect 17 0 52 0;
#X connect 18 0 22 0;
#X connect 19 0 20 0;
#X connect 20 0 21 0;
#X connect 22 0 46 0;
#X connect 22 0 47 0;
#X connect 22 0 48 0;
#X connect 28 0 32 0;
#X connect 32 0 33 0;
#X connect 33 0 31 0;
#X connect 33 0 29 0;
#X connect 33 0 30 0;
#X connect 55 0 56 0;
#X connect 56 0 57 0;
#X connect 57 0 58 0;
#X connect 58 0 53 0;
#X restore 1632 16 pd mappings;
#X obj 1103 297 sampler;
#X connect 1 0 12 0;
#X connect 2 0 11 0;
#X connect 4 0 5 0;
#X connect 8 0 17 0;
#X connect 15 0 16 0;
#X connect 19 0 18 0;
