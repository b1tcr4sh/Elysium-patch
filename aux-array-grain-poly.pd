#N canvas 434 144 1294 908 10;
#X obj 364 734 *~;
#X obj 726 312 inlet;
#X obj 591 166 inlet;
#X obj 384 95 inlet;
#X obj 227 295 float 0;
#X text 288 665 generate envelope;
#X obj 217 562 vline~;
#X obj 268 350 +;
#X msg 217 536 \$1 \, \$2 \$3;
#X obj 367 161 expr pow (2 \, $f1 / 12);
#X text 374 115 transposition (semitones);
#X text 297 192 start point milliseconds;
#X text 602 188 grain duration milliseconds;
#X obj 227 321 t f f;
#X obj 666 237 inlet;
#X text 677 252 pan -100 to 100;
#X obj 822 359 inlet;
#X msg 197 666 \$3 \$1 \$2 \$4;
#X obj 196 646 pack 0 0 0 1;
#X msg 133 390 10;
#X obj 233 108 t b b;
#X msg 146 142 stop;
#X obj 217 512 pack 0 0 20;
#X floatatom 271 487 8 0 0 0 - - - 0;
#X floatatom 217 487 5 0 0 0 - - - 0;
#X floatatom 351 487 11 0 0 0 - - - 0;
#X obj 247 181 inlet;
#N canvas 453 72 843 508 envelope-limiter 0;
#X obj 180 216 t b f;
#X obj 133 167 t f f f;
#X text 243 372 limit down time to (grain size - up time);
#X obj 162 293 -;
#X obj 162 320 t b f;
#X obj 146 403 -;
#X text 247 405 calculate delay time for down (grain size - down time);
#X obj 162 374 clip 10 10;
#X obj 181 194 - 10;
#X text 258 264 limit up time: 10 to (grain size - 10);
#X obj 131 78 inlet;
#X obj 239 74 inlet;
#X text 121 53 bang-it-out;
#X text 235 54 grain-dur (requested);
#X obj 416 78 inlet;
#X text 412 58 rise-time (requested);
#X obj 585 76 inlet;
#X text 581 56 fall-time (requested);
#X obj 145 433 outlet;
#X obj 303 439 outlet;
#X obj 224 435 outlet;
#X text 299 464 rise;
#X text 224 461 fall;
#X text 144 458 sustain;
#X obj 179 264 clip 10 10;
#X obj 181 241 float;
#X obj 163 346 float;
#X obj 133 119 float;
#X connect 0 0 25 0;
#X connect 0 1 24 2;
#X connect 1 0 5 0;
#X connect 1 1 3 0;
#X connect 1 2 8 0;
#X connect 3 0 4 0;
#X connect 4 0 26 0;
#X connect 4 1 7 2;
#X connect 5 0 18 0;
#X connect 7 0 5 1;
#X connect 7 0 20 0;
#X connect 8 0 0 0;
#X connect 10 0 27 0;
#X connect 11 0 27 1;
#X connect 14 0 25 1;
#X connect 16 0 26 1;
#X connect 24 0 3 1;
#X connect 24 0 19 0;
#X connect 25 0 24 0;
#X connect 26 0 7 0;
#X connect 27 0 1 0;
#X restore 551 552 pd envelope-limiter;
#X text 769 313 envelope rise time;
#X text 866 359 envelope fall time;
#X text 159 585 level;
#X obj 294 275 float 1;
#X obj 209 -34 t b f;
#X obj 254 -94 route bang;
#X floatatom 549 617 5 0 0 0 - - - 0;
#X floatatom 589 617 5 0 0 0 - - - 0;
#X floatatom 630 615 5 0 0 0 - - - 0;
#X obj 301 323 *;
#X obj 191 44 s getval-\$0;
#X obj 360 712 tabread4~;
#X msg 1006 644 set \$1;
#X obj 975 613 t b s;
#X floatatom 834 706 25 0 0 0 - - - 0;
#X obj 362 253 / 1000;
#X obj 253 268 *;
#X obj 325 303 *;
#X obj 361 232 samplerate~;
#X obj 129 173 del 10;
#X obj 36 747 sin-env;
#X obj 766 466 float;
#X obj 328 -53 unpack 0 0 0 0 0 0 0 0 s;
#X text 329 -72 level onset transp dur pan rise fall aux tablename;
#X obj 366 768 aux_pan \$2 \$10;
#X obj 157 560 inlet;
#X obj 919 421 inlet;
#X text 955 419 aux lvl;
#X obj 130 199 t b b b b b b;
#X obj 957 536 float;
#X obj 1144 531 inlet;
#X obj 977 574 symbol \$4;
#X obj 203 607 gain-scale-157;
#X text 1058 42 inlets \; 1 level 0-157 \, 127 = unity \; 2 onset ms \; 3 transp st \; 4 dur ms \; 5 pan -100 to 100 \; 6 rise ms \; 7 fall ms \; 8 aux 0-157 \, 127 = unity;
#X text 883 2 arguments \; 1 receive-name-stem \; 2 poly-voice-stem-symbol \; 3 voice-number \; [optional] \; 4 buffer-name \; 5 level \; 6 onset \; 7 transp \; 8 dur \; 9 pan \; 10 rise \; 11 fall \; 12 aux;
#X obj 365 801 snake~ in 4;
#X obj 365 836 outlet~;
#X obj 247 206 settingizer \$2-onset \$6 0 3.40282e+38 getval-\$0;
#X obj 367 132 settingizer \$2-transp \$7 -3.40282e+38 3.40282e+38 getval-\$0;
#X obj 205 582 settingizer \$2-level \$5 1 157 getval-\$0;
#X obj 593 208 settingizer \$2-dur \$8 20 3.40282e+38 getval-\$0;
#X obj 666 273 settingizer \$2-pan \$9 -100 100 getval-\$0;
#X obj 734 335 settingizer \$2-rise \$10 10 3.40282e+38 getval-\$0;
#X obj 803 397 settingizer \$2-fall \$11 10 3.40282e+38 getval-\$0;
#X obj 901 451 settingizer \$2-aux \$12 1 127 getval-\$0;
#X obj 1043 532 r \$2-tablename;
#X obj 242 72 r \$2-grains-off;
#X floatatom 311 417 24 0 0 0 - - - 0;
#X obj 138 18 t b b b b;
#X obj 95 77 bng 16 250 50 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000;
#X floatatom 376 344 24 0 0 0 - - - 0;
#X obj 109 -25 bng 16 250 50 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000;
#X obj 5 -93 poly-voice-alloc \$1 \$3;
#X obj 160 766 scope~;
#X msg 1032 676 loop-grain-buffer;
#X obj 887 679 array size \$4;
#X connect 0 0 52 0;
#X connect 1 0 70 0;
#X connect 2 0 68 0;
#X connect 3 0 66 0;
#X connect 4 0 13 0;
#X connect 6 0 39 0;
#X connect 7 0 23 0;
#X connect 8 0 6 0;
#X connect 9 0 31 1;
#X connect 13 0 24 0;
#X connect 13 0 75 0;
#X connect 13 1 7 0;
#X connect 14 0 69 0;
#X connect 16 0 71 0;
#X connect 17 0 48 0;
#X connect 18 0 17 0;
#X connect 19 0 48 3;
#X connect 20 0 21 0;
#X connect 20 1 19 0;
#X connect 21 0 47 0;
#X connect 22 0 8 0;
#X connect 23 0 22 1;
#X connect 24 0 22 0;
#X connect 25 0 22 2;
#X connect 26 0 65 0;
#X connect 27 0 18 0;
#X connect 27 0 34 0;
#X connect 27 1 18 1;
#X connect 27 1 35 0;
#X connect 27 2 18 2;
#X connect 27 2 36 0;
#X connect 31 0 37 0;
#X connect 32 0 76 0;
#X connect 32 1 67 0;
#X connect 33 0 76 0;
#X connect 33 1 50 0;
#X connect 37 0 7 1;
#X connect 39 0 0 0;
#X connect 40 0 39 0;
#X connect 40 0 82 0;
#X connect 41 0 83 0;
#X connect 41 1 40 0;
#X connect 41 1 83 1;
#X connect 42 0 65 2;
#X connect 43 0 45 1;
#X connect 43 0 44 1;
#X connect 43 0 78 0;
#X connect 44 0 4 1;
#X connect 45 0 37 1;
#X connect 46 0 43 0;
#X connect 47 0 56 0;
#X connect 48 0 0 1;
#X connect 48 1 80 1;
#X connect 49 0 52 1;
#X connect 50 0 32 0;
#X connect 50 0 76 0;
#X connect 50 1 65 0;
#X connect 50 2 66 0;
#X connect 50 3 68 0;
#X connect 50 4 69 0;
#X connect 50 5 70 0;
#X connect 50 6 71 0;
#X connect 50 7 72 0;
#X connect 50 8 59 1;
#X connect 52 0 63 0;
#X connect 52 0 81 0;
#X connect 52 1 63 1;
#X connect 52 2 63 2;
#X connect 52 3 63 3;
#X connect 53 0 67 0;
#X connect 54 0 72 0;
#X connect 56 0 4 0;
#X connect 56 1 27 0;
#X connect 56 2 31 0;
#X connect 56 3 59 0;
#X connect 56 4 49 0;
#X connect 56 5 57 0;
#X connect 57 0 52 2;
#X connect 58 0 59 1;
#X connect 59 0 41 0;
#X connect 60 0 18 3;
#X connect 63 0 64 0;
#X connect 65 0 44 0;
#X connect 66 0 9 0;
#X connect 67 0 60 0;
#X connect 68 0 27 1;
#X connect 68 0 25 0;
#X connect 68 0 45 0;
#X connect 69 0 49 1;
#X connect 70 0 27 2;
#X connect 71 0 27 3;
#X connect 72 0 57 1;
#X connect 73 0 59 1;
#X connect 74 0 20 0;
#X connect 76 0 47 0;
#X connect 76 1 20 0;
#X connect 76 2 38 0;
#X connect 76 3 46 0;
#X connect 77 0 56 0;
#X connect 79 0 76 0;
#X connect 80 0 33 0;
#X connect 83 0 42 0;
