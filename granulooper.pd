#N canvas 314 154 1236 708 12;
#X obj 0 39 bng 50 250 50 0 \$1-loop-start \$1-loop-start set\ loop\ start 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 0 110 bng 50 250 50 0 \$1-loop-end \$1-loop-end set\ loop\ end 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 0 203 tgl 50 0 \$1-loop-toggle \$1-loop-toggle loop\ playback\ on/off 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 212 156 hsl 195 10 0 1 0 0 empty \$0-loop-pos empty -2 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 209 185 nbx 15 17 -1e+37 1e+37 0 0 empty \$1-dur loop\ length\ (s) 0 -10 0 12 #fcfcfc #000000 #000000 0 256;
#X obj 74 260 tgl 19 0 \$1-auto-loop \$1-auto-loop start\ playback\ when\ loop\ end\ is\ set 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 0 305 _granulator \$1 \$2 2;
#X obj 109 21 level-control-2ch \$1;
#X text 561 11 arguments \; 1 name of object (name-stem for receives) \; 2 default buffer name;
#X obj 75 222 tgl 19 0 \$1-keep-loop-size \$1-keep-loop-size maintain\ first\ loop\ duration\ in\ later\ loops 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#N canvas 216 333 1091 647 timers-and-resets 0;
#X obj 424 309 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 391 376 timer;
#X obj 134 64 r master-onoff;
#X obj 615 310 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 583 379 timer;
#X obj 391 400 nbx 5 17 -1e+37 1e+37 0 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 256;
#X obj 583 403 nbx 5 17 -1e+37 1e+37 0 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 256;
#X obj 134 89 sel 0 1;
#X obj 448 594 outlet;
#X obj 463 464 s \$1-end;
#X obj 629 464 s \$1-start;
#X obj 448 551 pack 0 0 0;
#X obj 389 429 t f f f;
#X obj 448 523 -;
#X text 510 573 dur startpoint endpoint;
#X obj 147 363 line 0 10;
#X obj 147 387 s \$0-loop-pos;
#X obj 146 311 r \$1-dur;
#X obj 511 594 s \$0-time;
#X obj 132 204 symbol \$1;
#X obj 500 15 r \$1-loop-end;
#X obj 101 147 t b b;
#X msg 103 320 0;
#X msg 148 336 0 \, 1 \$1;
#X msg 131 238 \$1-buffer const \; \$1-view const \; \$1-loop-toggle 0;
#X obj 179 121 symbol \$1;
#X obj 755 14 r \$1-first-loop;
#X obj 854 181 r \$1-dur;
#X obj 826 121 == 0;
#X obj 789 222 del;
#X obj 789 250 s \$1-loop-auto-end;
#X obj 358 162 r \$1-loop-auto-end;
#X obj 787 181 spigot;
#X obj 498 162 spigot 1;
#X obj 686 119 r \$1-loop-start;
#X msg 588 234 0;
#X msg 588 188 1;
#X obj 685 149 t b b b;
#X obj 498 215 spigot;
#X obj 553 90 float;
#X obj 583 431 t f f f;
#X obj 498 251 t b b;
#X obj 491 342 r \$1-reset-timer;
#X msg 179 147 \; \$1-reset-timer bang \; \$1-first-loop 1;
#X obj 500 41 t b b;
#X text 798 34 initialize;
#X obj 358 188 t b b;
#X obj 392 222 s \$1-loop-end;
#X text 410 242 for visual feedback, f 13;
#X obj 350 14 r \$1-keep-loop-size;
#X obj 350 38 == 0;
#X obj 387 91 float;
#X obj 387 115 s \$1-first-loop;
#X connect 0 0 1 1;
#X connect 1 0 5 0;
#X connect 2 0 7 0;
#X connect 3 0 4 1;
#X connect 4 0 6 0;
#X connect 5 0 12 0;
#X connect 6 0 40 0;
#X connect 7 0 21 0;
#X connect 7 1 25 0;
#X connect 11 0 8 0;
#X connect 11 0 18 0;
#X connect 12 0 13 0;
#X connect 12 1 11 2;
#X connect 12 2 9 0;
#X connect 13 0 11 0;
#X connect 15 0 16 0;
#X connect 17 0 23 0;
#X connect 19 0 24 0;
#X connect 20 0 44 0;
#X connect 21 0 22 0;
#X connect 21 1 19 0;
#X connect 22 0 15 0;
#X connect 23 0 15 0;
#X connect 25 0 43 0;
#X connect 26 0 39 1;
#X connect 26 0 28 0;
#X connect 27 0 29 1;
#X connect 28 0 32 1;
#X connect 29 0 30 0;
#X connect 31 0 46 0;
#X connect 32 0 29 0;
#X connect 33 0 38 0;
#X connect 34 0 37 0;
#X connect 35 0 38 1;
#X connect 36 0 38 1;
#X connect 37 0 36 0;
#X connect 37 1 3 0;
#X connect 37 2 32 0;
#X connect 38 0 41 0;
#X connect 39 0 33 1;
#X connect 39 0 28 0;
#X connect 40 0 13 1;
#X connect 40 1 11 1;
#X connect 40 2 10 0;
#X connect 41 0 0 0;
#X connect 41 1 35 0;
#X connect 42 0 1 0;
#X connect 42 0 4 0;
#X connect 44 0 51 0;
#X connect 44 1 39 0;
#X connect 44 1 33 0;
#X connect 46 0 0 0;
#X connect 46 1 47 0;
#X connect 49 0 50 0;
#X connect 50 0 51 1;
#X connect 51 0 52 0;
#X restore 564 94 pd timers-and-resets;
#N canvas 934 299 395 353 initialize 0;
#X obj 95 4 loadbang;
#X obj 96 28 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 94 89 symbol \$1;
#X obj 99 55 t b b;
#X msg 95 172 \; \$1-first-loop 1 \; \$1-view rename \$1-view \; \$1-view edit 0 \; \$1-view vis 1 \; \$1-view bounds 0 0 100 -1;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X restore 564 69 pd initialize;
#X obj 563 157 outlet;
#N canvas 938 110 762 894 schedule-loops-as-grains 0;
#X obj 347 458 -;
#X obj 399 259 t f f;
#X obj 311 532 metro;
#X obj 375 549 + 40;
#X msg 178 277 1;
#X obj 178 311 spigot;
#X obj 316 594 symbol \$1;
#X obj 190 613 sel 0;
#X obj 314 52 r \$1-end;
#X obj 346 490 t f f f;
#X obj 469 547 s \$1-dur;
#X obj 187 499 r \$1-loop-toggle;
#X obj 178 337 s \$1-loop-toggle;
#X obj 399 231 nbx 15 17 -1e+37 1e+37 0 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 256;
#X obj 192 651 s \$1-grains-off;
#X obj 378 626 pack s 0 0 0 40;
#X msg 381 673 \; \$1-file-position-max \$3 \; \$1-level-ctrl 127 \; \$1-aux-ctrl 100 \; \$1-dur-ctrl \$2 \; \$1-rise-ctrl \$5 \; \$1-fall-ctrl \$5 \; \$1-file-position-ctrl \$4 \; \$1-generate-data bang \; \$1-trigger bang;
#X obj 322 200 nbx 15 17 -1e+37 1e+37 0 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 256;
#X obj 215 276 r \$1-auto-loop;
#X obj 382 52 r \$1-start;
#X obj 320 230 t b f f;
#X connect 0 0 9 0;
#X connect 1 0 0 1;
#X connect 1 1 15 3;
#X connect 2 0 6 0;
#X connect 3 0 15 1;
#X connect 4 0 5 0;
#X connect 5 0 12 0;
#X connect 6 0 15 0;
#X connect 7 0 14 0;
#X connect 8 0 17 0;
#X connect 9 0 2 1;
#X connect 9 1 3 0;
#X connect 9 2 10 0;
#X connect 11 0 2 0;
#X connect 11 0 7 0;
#X connect 13 0 1 0;
#X connect 15 0 16 0;
#X connect 17 0 20 0;
#X connect 18 0 5 1;
#X connect 19 0 13 0;
#X connect 20 0 4 0;
#X connect 20 1 0 0;
#X connect 20 2 15 2;
#X restore 564 194 pd schedule-loops-as-grains;
#X text 611 157 dur startpoint endpoint;
#X obj 645 129 s latest-loop-timing;
#N canvas 696 271 611 472 show-loop 0;
#X obj 294 217 *;
#X obj 295 241 expr int($f1+0.5);
#X obj 111 146 t b f;
#X obj 112 242 *;
#X obj 112 266 expr int($f1+0.5);
#X obj 111 53 r \$0-time;
#X obj 112 79 unpack 0 0 0;
#X obj 112 106 swap;
#X obj 109 358 s \$1-view;
#X obj 110 334 list prepend 0;
#X obj 341 326 symbol \$1;
#X obj 383 358 pack s 0;
#X obj 296 264 t f b f;
#X obj 240 142 t b f;
#X obj 111 297 array get \$2, f 23;
#X obj 366 296 nbx 5 17 -1e+37 1e+37 0 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 256;
#X msg 383 382 \; \$1-view resize \$2 \; \$1-view bounds 0 1 \$2 -1;
#X obj 238 196 nbx 5 17 -1e+37 1e+37 0 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 256;
#X obj 309 196 nbx 5 17 -1e+37 1e+37 0 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 256;
#X obj 112 206 v samples-per-ms;
#X obj 239 171 v samples-per-ms;
#X connect 0 0 1 0;
#X connect 1 0 12 0;
#X connect 2 0 19 0;
#X connect 2 1 3 1;
#X connect 3 0 4 0;
#X connect 4 0 14 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 6 1 7 1;
#X connect 7 0 2 0;
#X connect 7 1 13 0;
#X connect 9 0 8 0;
#X connect 10 0 11 0;
#X connect 11 0 16 0;
#X connect 12 0 14 1;
#X connect 12 1 10 0;
#X connect 12 2 15 0;
#X connect 13 0 20 0;
#X connect 13 1 18 0;
#X connect 14 0 9 0;
#X connect 15 0 11 1;
#X connect 17 0 0 0;
#X connect 18 0 0 1;
#X connect 19 0 3 0;
#X connect 20 0 17 0;
#X restore 564 218 pd show-loop;
#X text 791 91 so that granulator will work on just the most recent loop audio - see main patch ... one could also use the outlet to set timing for multiple granulators specific to each loop ... but that presents a *lot* of controls to worry about ..., f 61;
#X obj 0 1 cnv 20 200 20 empty empty \$1 5 9 0 18 #ffc7c6 #404040 0;
#N canvas 150 188 552 400 memory 0;
#X obj 66 78 settings-memory-module \$1-keep-loop-size;
#X obj 69 106 settings-memory-module \$1-auto-loop;
#X restore 564 240 pd memory;
#N canvas 121 159 450 278 (subpatch) 0;
#X array \$1-view 100 float 2;
#X coords 0 0 100 -1 200 140 1 0 0;
#X restore 210 15 graph;
#X text 879 176 known issue \; \; if you edit looper2.pd \, you need to make sure the name of the loop viewer array is still \$1-loop and that its size is 100 and that it doesn't save values, f 27;
#X connect 10 0 12 0;
#X connect 10 0 15 0;
#X coords 0 -1 1 1 410 280 2 0 0;
