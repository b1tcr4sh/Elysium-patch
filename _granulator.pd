#N canvas 0 381 1671 708 10;
#X obj 466 251 bng 45 250 50 0 \$1-generate-data \$1-generate-data GENERATE\ CONTROL\ DATA 0 -7 0 10 #fcfcfc #000000 #000000;
#N canvas 712 195 1016 593 position 0;
#X obj 395 236 *;
#X obj 395 212 float;
#X text 319 66 starting file position;
#X obj 332 116 clip 0 0;
#X obj 337 387 clip 0 0;
#X floatatom 452 46 15 0 0 0 - - - 0;
#X obj 589 207 r \$1-traverse-speed;
#X obj 595 83 r \$1-file-position-max;
#X obj 422 187 r \$1-offset;
#X obj 367 439 s \$1-onset;
#X obj 333 21 r \$1-trigger;
#X obj 332 51 bng 16 250 50 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000;
#X obj 450 22 r \$1-file-position;
#X obj 513 252 r \$1-file-position-unskewed;
#X obj 331 89 float;
#X obj 395 294 +;
#X obj 453 349 s \$1-file-position-ctrl;
#X text 599 349 update file position by increment;
#X obj 332 143 t f b;
#X obj 340 470 s \$1-trigger-grains;
#X obj 339 413 t b f;
#X connect 0 0 15 0;
#X connect 1 0 0 0;
#X connect 3 0 18 0;
#X connect 4 0 20 0;
#X connect 5 0 14 1;
#X connect 6 0 0 1;
#X connect 7 0 3 2;
#X connect 7 0 4 2;
#X connect 8 0 1 1;
#X connect 10 0 11 0;
#X connect 11 0 14 0;
#X connect 12 0 5 0;
#X connect 13 0 15 1;
#X connect 14 0 3 0;
#X connect 15 0 16 0;
#X connect 18 0 4 0;
#X connect 18 1 1 0;
#X connect 20 0 19 0;
#X connect 20 1 9 0;
#X restore 354 375 pd position;
#N canvas 890 500 838 508 auto 0;
#X obj 292 274 metro 20;
#X obj 335 178 r \$1-offset;
#X obj 397 348 s \$1-generate-data;
#X obj 292 147 r \$1-auto-grain-toggle;
#X floatatom 424 263 5 0 0 0 - - - 0;
#X obj 275 349 s \$1-trigger;
#X obj 205 185 bng 16 250 50 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000;
#X obj 292 302 t b b;
#X obj 498 152 r \$1-grains-off;
#X msg 498 173 0;
#X obj 498 194 s \$1-auto-grain-toggle;
#X connect 0 0 7 0;
#X connect 1 0 0 1;
#X connect 1 0 4 0;
#X connect 3 0 0 0;
#X connect 6 0 7 0;
#X connect 7 0 5 0;
#X connect 7 1 2 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X restore 303 374 pd auto;
#X obj 174 312 nbx 12 28 -1e+37 1e+37 0 0 empty \$1-onset empty 0 -12 0 24 #fcfcfc #000000 #000000 0 256;
#X text 135 179 semitones;
#X text 1074 179 reverb: 100 = full;
#X text 611 179 grain duration ms, f 18;
#X obj 1 1 midi-gauss-control \$1 level;
#X obj 120 1 midi-gauss-control \$1 transp;
#X obj 239 1 midi-gauss-control \$1 file-position;
#X obj 596 1 midi-gauss-control \$1 dur;
#X obj 715 1 midi-gauss-control \$1 rise;
#X obj 835 1 midi-gauss-control \$1 fall;
#X obj 954 1 midi-gauss-control \$1 pan;
#X obj 1073 1 midi-gauss-control \$1 aux;
#X text 951 179 pan \, -100 to 100;
#X text 751 179 envelope rise and fall ms;
#X obj 1276 157 rev2~ 100 90 3000 50;
#X obj 1038 226 scope~;
#X obj 915 405 audio_safety~;
#X obj 1014 404 audio_safety~;
#X obj 477 1 midi-gauss-control \$1 offset;
#N canvas 1276 222 450 300 \$0-optional-buffer 0;
#X restore 1334 360 pd \$0-optional-buffer;
#X obj 1258 419 float \$0;
#X obj 1257 349 bng 16 250 50 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000;
#X obj 1321 418 symbol \$1;
#X obj 1257 370 t b b;
#X obj 1260 444 pack 0 s;
#X msg 1165 475 set \$1 \$2;
#X msg 1147 503 69597 loop-grain;
#X msg 1259 490 \; pd-\$1-optional-buffer clear \, obj 35 61 loadbang \, obj 36 112 samplerate~ \, obj 36 136 * 600 \, obj 35 87 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 \, obj 36 185 array size \$2-buffer \, obj 37 31 array define \$2-buffer \, obj 248 184 s \$2-buffer-size \, connect 0 0 3 0 \, connect 1 0 2 0 \, connect 2 0 4 0 \, connect 2 0 6 0 \, connect 3 0 1 0;
#X obj 1254 285 loadbang;
#X obj 1254 327 sel 0;
#X obj 1219 56 snake~ out 4;
#X obj 333 250 tgl 45 0 \$1-auto-grain-toggle \$1-auto-grain-toggle AUTO\ GRAIN\ TOGGLE 0 -7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 899 477 outlet~;
#X obj 1039 475 outlet~;
#X obj 358 1 midi-gauss-control \$1 traverse-speed;
#X obj 256 403 loadbang;
#X obj 2 228 load-file \$1 \$2;
#X text 494 179 time offset between grains (in auto mode), f 14;
#X text 374 179 ratio of file position offset to time offset (in auto mode), f 16;
#X obj 256 429 bng 16 250 50 0 empty empty empty 0 -8 0 10 #fcfcfc #000000 #000000;
#X symbolatom 443 317 40 0 0 0 - \$1-tablename - 16;
#X obj 255 454 symbol \$2;
#X obj 254 478 s \$1-tablename;
#X text 181 295 position in buffer;
#X text 444 301 current buffer name;
#X obj 609 252 bng 45 250 50 0 \$1-trigger \$1-trigger TRIGGER\ A\ GRAIN 0 -7 0 10 #fcfcfc #000000 #000000;
#X text 245 179 file position ms (automatically updated by file traversal in auto mode), f 16;
#X text 8 179 127 = unity gain;
#X obj 723 253 bng 45 250 50 0 \$1-grains-off \$1-grains-off GRAINS\ OFF 0 -7 0 10 #fcfcfc #000000 #000000;
#X text 503 359 arguments \; \; 1 - receive-name for granulator engine \; [optional] 2 - default sample buffer \; 3 - number of voices \; 4 - create-internal-buffer toggle \; \; send~ outputs \; grains-l \, grains-r \; \; receives \; \$1-generate-data bang \; \$1-trigger bang \; \$1-level 0-157 \, 127 = unity \; \$1-transp st \; \$1-onset ms \, hard-set \; \$1-file-position ms \; \$1-file-position-skew ms \; \$1-offset ms (between grains in auto schedule) \; \$1-offset-skew ms \; \$1-dur ms \; \$1-dur-skew ms \; \$1-rise ms (0 = 1/2 dur) \; \$1-rise-skew ms \; \$1-fall ms (0 = 1/2 dur) \; \$1-fall-skew ms \; \$1-pan -100 to 100 \; \$1-aux 0-157 \, 127 = unity;
#X obj 1254 306 float \$4;
#X obj 1219 15 aux-poly-voices aux-array-grain-poly \$3 \$1 \$2 100 0 0 200 0 100 100, f 69;
#X obj 924 443 throw~ grains-l;
#X obj 1049 443 throw~ grains-r;
#X obj 943 200 level-control-2ch \$1;
#X connect 17 0 57 0;
#X connect 17 1 57 1;
#X connect 19 0 35 0;
#X connect 19 0 55 0;
#X connect 20 0 36 0;
#X connect 20 0 56 0;
#X connect 23 0 27 0;
#X connect 24 0 26 0;
#X connect 25 0 27 1;
#X connect 26 0 23 0;
#X connect 26 1 25 0;
#X connect 27 0 30 0;
#X connect 27 0 28 0;
#X connect 28 0 29 0;
#X connect 31 0 53 0;
#X connect 32 1 24 0;
#X connect 33 0 57 0;
#X connect 33 1 57 1;
#X connect 33 2 17 0;
#X connect 33 3 17 0;
#X connect 38 0 42 0;
#X connect 42 0 44 0;
#X connect 44 0 45 0;
#X connect 53 0 32 0;
#X connect 54 0 33 0;
#X connect 57 0 19 0;
#X connect 57 0 18 0;
#X connect 57 1 20 0;
#X connect 57 1 18 0;
#X coords 0 -1 1 1 1190 360 2 0 0;
